---
title: vissim7笔记
date: 2019-4-31 23:03:04
tags: [学习笔记,专业软件]
---

#  README

本文记录在学习使用vissim7过程中的操作心得

<!-- more -->

# vissim7学习
# 基础操作
vissim高版本增加了撤销重做按钮

## 路网对象栏
左侧的路网对象图标，点击文字使其显示黄底表示激活了该路网对象，点击相应图标可以显示或隐藏路网对象
点击锁定按钮可以使路网对象固定防止被拖动，点击标签可以显示路网对象的编号等
最后一个按钮可以编辑图形参数

## 层
类似CAD一样，当绘制立体交叉口时，设置高度不同，就可以分成很多层，可以根据需要关闭和开启相应的层

## 背景
添加底图

## 快速浏览
在绘图区域点击路段，则在左下角快速浏览选项卡就可以显示该路段的属性
按住CTRL键在绘图区域点击选择多个路段，则在左下角快速浏览选项卡就可以显示这些路段的属性
路段的相同属性会具体显示出来，多个路段中的不同属性则以*号显示

## 鹰眼图
显示一个缩小的全图和一个视图框，拖动视图框可以调整绘图区域的具体视图

## 路网编辑器
选择视图——打开新的路网编辑器可以调出多个路网编辑器选项卡（显示在窗口最底部）
可以将路网编辑器选项卡拖出来重新布局，可以多个编辑器窗口同时排列

# 背景图导入
读取背景图，来自遥感/航拍/电子底图/CAD图等
可以对背景图缩放比例
可以移动背景图
layout文件
如果一个路网模型需要几个工程师分开同时做的话，需要事先定义好比例再开始创建路网

导入背景图
1、在路网对象选项卡中选择背景图片按钮
2、在空白处单击右键打开快捷菜单选择添加背景图片
3、选择路径并导入
4、在路网编辑器工具栏下点击显示整个路网按钮
5、图片上右击选择设置比例
7、左击拖动一定长度并设置比例的实际距离
8、导入完成

在背景选项卡，可以单独设置显示或隐藏某一个背景底图

# 路段和连接器
## 新建路段
1、在路网对象中选项卡中选择添加路段，
   点击两端拖动长度
   摁住ctrl+鼠标右键拖动出一条新的路段
2、路段中间CTRL+右击可以添加新的节点，删除节点直接用鼠标左键拖动到端点处即可删除
   或者右击打开右键菜单选择删除点
3、在路段中右击选择添加点也可以添加节点

## 打断路段
在想要打断路段的地方右击选择拆分路段就能打断，打断后产生一个连接器连接着两个路段

## 添加中间点
1、在添加中间点的起始位置摁住ATL+鼠标左键拖动到结束位置，弹出添加中间点对话框
2、选择中间点数量，中间点数量指的是路段起点到中间节点的中间点数。两边对称添加

## 添加车道
1、双击鼠标弹出路段属性对话框可以设置车道数，但是这样会在路中心线两边对称添加车道
2、右键单击路段弹出右键菜单，可以选择在左边/右边插入车道

## 路段复制
1、对需要复制的路段点选，CTRL+c并CTRL+v
2、摁住CTRL+鼠标左键拖拽要复制的路段就能复制出来

## 旋转路段
点选要旋转的路段，摁住ATL+鼠标左键不放旋转

## 选择重合的路段
选中路段后，要选择叠加的另一条路段，摁住TAB键

## 设置路段高度
1、新建时或双击现有路段打开路段属性设置界面，在显示选项卡中设置Z偏移量
2、然后右键打开菜单中选择重新计算多义线即可
3、ctrl+d可以切换成3D视图

## 画交叉口进口的路段、渐变段和展宽段
第一种方法
1、分别在路段画3车道的路段，展宽段画4车道的路段
2、画渐变段：用在路段和展宽段间画两个连接器，一个连接器是1~3车道连接1~3车道，另一个是路段3车道连接展宽段的4车道
第二种方法
1、分别在路段画3车道的路段，展宽段画4车道的路段
2、在路段末端进行打断，打断出的一小节路段设置为4条车道，其中4车道为0.1m
3、画渐变段：在打断产生一小节路段后再画一个连接器连接展宽段即为渐变段
4、ctrl+v可以开启或关闭某类路网对象的视图

## 设置允许/不允许变道
打开路段设置界面，在车道选项卡的“不向左变道”进行勾选

## 对于其他行驶方向车辆到达展宽段无法变道问题
可以将交叉口的每一条车道分开画，这样可以根据具体行驶方向连接不同车道，车辆提前变道，不必产生展宽段变道问题

## 快速创建反方向同类型车道
在原来已经创建设置好的车道上右键弹出菜单选择“创建反方向车道”

# 定义分布
## 定义期望车速分布
基本数据——分布——期望速度，在下方弹出列表速度
空白处右击新建弹出新建界面，设置上下限速度，默认是线性分布
如果要设置非线性分布，在速度函数线上右击出现一个红点后拖拽调整分布比例

## 定义时间分布
一般用在停车时间、过闸时间等
基本数据——分布——时间，在下方弹出列表
空白处右击新建弹出新建界面，可以选择正态分布或者经验分布曲线

## 车辆类型
基本数据——车辆类型新建
设置种类、外观、速度、载客人数等各种属性

## 车辆模型
基本数据——分布——2D/3D模型，选择具体车辆类型会弹出该类的具体比例
主要是针对某种车辆类型的具体2D/3D模型比例分布进行设置
如设置某品牌的车辆在小汽车中的比例是多少
比例分布加起来可以不为1

## 颜色分布
基本数据——分布——颜色，选择具体名称会弹出该名称的具体比例

## 车辆类别
车辆类型的集合（type）一个type可能包含小汽车、大货车等等

先定义好自己需要的颜色和车辆2D/3D模型，然后定义自己需要的车辆类型，最后定义车辆类别

# 车辆输入设置
## 驾驶行为设置
驾驶行为包括自由、逼近、跟随和危险
1、基本数据——驾驶行为点击在下方底部栏打开驾驶行为列表，双击某一行，打开具体设置驾驶行为参数集界面
2、在跟车选项卡的模型参数中修改停车间距和安全距离就是修改了驾驶行为的重要特征
3、跟车模型可设置wiedemann74（用于城市道路）和wiedemann99（用于高速道路上面）

## 定义车辆组成
1、选择交通——车辆组成，打开车辆组成选项卡
2、选择相对流量显示
3、右键选择新建车辆组成
3、在具体车辆组成中选择新建车辆类型，并修改类型和比例等

## 添加车辆输入
第一种方法
1、在路网对象中选择车辆输入按钮
2、在要添加的路段地方ctrl+右键点击设置一条车辆输入的黑线
3、双击黑线弹出设置列表，设置流量和车辆构成

第二种方法
1、在要添加的路段地方右键选择新建车辆输入
2、在下方列表添加输入参数

# 冲突让行
## 设置冲突区域
1、在路网对象激活冲突区域按钮
2、路网种显示的深黄色地方就是有冲突的区域
3、点击一个冲突区域，深黄色变亮黄色表示激活
4、右键打开菜单中可以选择谁先行谁后行
5、也可以摁住ctrl键并右击冲突区域，会变成一个方向红色一个方向绿色
6、哪边绿色哪边先行，都是红色表示互相让行

## 定义时间区间
1、首先布置一个车辆输入
2、在空白处右击选择“编辑时间间隔”
3、底部弹出时间间隔栏，然后空白处右击新建新的时间间隔
4、在底部车辆输入栏点击一个小扳手按钮，设置要在栏内显示的选项，将流量输入选项加进去
5、车辆输入栏单栏下拉框中选择时间间隔内的车流量
6、在右边弹出的时间间隔进行勾选设置哪个时间段的车流量为多少

# 路径设置
## 新建路径
1、路网对象中选择车辆路径激活
2、ctrl+右键在路径决策起点点击，出现品红色线
3、在路径决策终点点击，出现蓝色线
4、鼠标移动到空白处出现交叉时单击结束
5、双击路径决策中品红色的线，底部弹出设置窗口
6、激活同步性按钮，当选择设置界面的不同路段时，绘图区域会高亮显示选中路段
7、根据不同路段设置相对车流比例

## 添加已有路径
1、如果要在已有决策路径上添加新的路径，在路径决策的品红色起点线右键选择添加决策路径继续添加
2、如果暂时不需要车辆通过某条决策路径，可以在这条路径上的车流量比例设为0
3、将已创建的路径按住鼠标拖动到空白处出现交叉后即可删除

## 限制路径中的车辆类型
1、要只限制某一种车型的行驶方向，在静态车辆路径栏去掉所有车辆类型的勾，选择某种车辆类别

## 在路径中添加不同的时间间隔
1、要在静态路径种设置时间间隔，选中路径在右边栏空白处右键编辑时间区间，新建时间间隔
2、点击小扳手按钮，将输入车流中具体的时间间隔添加进去

# 信号控制
## 添加信号控制方案
1、选择信号控制——信号控制机
2、底部弹出信号控制栏列表，右击选择新建，弹出信号设置界面
3、在设置界面点击编辑信号控制按钮，出现vissig界面
4、选中信号灯组，右边空白处新建相位
5、在每个方案可以选择信号灯的序列，设置每个信号灯时间
6、选中绿间隔矩阵，新建
7、选中信号配时方案，新建
8、在信号配时方案中，绿灯间隔可以选择刚刚新建好的绿灯间隔矩阵
9、通过拖拽每个相位的时间长度来调整相位配时
10、借助绿间隔矩阵，通过查看背景色中是否为橙色判断信号配时有没有冲突

## 装信号灯头（SH）
1、路网对象选择信号灯头
2、在停车线附近位置ctrl+右击打开信号灯设置，注意选择信号控制机和信号灯组
3、把信号灯头放置在连接器上，因为车辆会默认从路段开到连接器，连接器上有信号灯才停

# 限速设置
## 减速设置
1、路网对象中选择减速区域
2、ctrl+右击拖拽画出要减速的路径，弹出设置界面
3、选择期望速度分布和减速度

## 期望速度设置
1、路网对象中选择期望速度决策点
2、ctrl+右击单击某点创建决策点，弹出设置速度界面
3、该决策点设置后，经过该决策点的车辆会一直保持决策速度，如果要修改速度，在后方重新再设置一个决策点

# 公交设置
## 公交车站设置
1、路网对象中选择公交车站
2、ctrl+右击拖拽画出公交车站区域，弹出设置界面（或者直接ctrl+右击添加）
3、要创建港湾车站，先将创建好的公交站区域移动到港湾路段边上，然后在公交站上右击选择创建港湾车站

## 公交线路设计
1、路网对象中选择公交线路
2、在路段上右击选择添加公交线路，并在末端点击，弹出设置界面
3、在开始时间选项卡内右击新建公交班次（只能添加一个班次）
4、要添加多个班次，直接右击选择“创建开始时间”，设置开始/结束时间及发车频率

## 将车站与线路进行关联
1、选中公交线路后，在公交站附近的公交线路上右击出现一个小的节点
2、拖动节点到车站上面
3、在弹出的设置界面勾选激活公交车站

# 停车设置
## 闸机收费站等收入口停车
1、路网对象中选择停车标志
2、右击创建停车标志
3、在时间分布选项卡中勾选并创建时间分布

## 停车位停车
1、路网对象中选择激活停车场
2、在路网上右击选择添加停车场。在弹出的界面设置长度、车位等
3、路网对象中选择车辆路径，在下拉箭头列表中选择车辆路径（停车）
4、创建停车路径，注意停车路径末端要落到前面设置好的停车区域
5、停车比率为100%，意思是有停车位就停进去，没有停车位就不停

## 要改变停车位的停车顺序
1、打开停车位的属性设置界面
2、在额外属性选项卡，设置最后的吸引为100，首个的吸引为0，则最后的吸引最大。
3、由于最后的吸引比首个大，停车从最后一个停车位开始停

## 模拟司机停车对外侧道路占用影响
1、在停车场设置的停车空间选项卡中选择相应占道时间分布，模拟不同司机有不同的占道情况
2、选择基本数据——驾驶行为
3、在底部弹出的驾驶行为选项卡，新建一种驾驶行为
4、双击打开新建的驾驶行为，在横向行为选项卡上勾选“与相邻车道上的车辆保持横向距离”
5、选择基本数据——路段驾驶行为类型，弹出的驾驶行为列表右键新建一个驾驶行为类型
6、该新建的驾驶行为类型使用刚刚为停车专门新建的驾驶行为
7、双击停车场所在的路段，弹出的属性设置界面将行为类型修改为刚刚新建的驾驶行为类型

# 仿真参数
## 仿真参数解释
1、如果要运行一个高峰小时的仿真结果，建议设置仿真时间为4500s——5400s，给充分时间预热
2、仿真精度：即对仿真时间切片，每隔多久改变一次仿真状态
3、随机种子：仿真运行的随机数。如果不修改随机种子则每次的仿真结果都是相同的
4、随机种子增量：即每运行一次随机种子数增加值
5、运行次数：根据修改的随机种子增量重复运行的次数
6、仿真运行速度：仿真秒与实际秒的比值
7、多核数量：根据计算机核数修改
8、中断时刻：仿真需要中断的时间
9、点击界面上方的快速模式按钮可以加快仿真速度

# 仿真结果评价
## 排队计数器
1、左侧路网对象点击激活排队计数器
2、在设置位置CTRL+右键点击创建
3、选择评估——配置打开评估设置窗口，选择结果特征属性选项卡
4、在收集数据一列勾选排队的框，设置开始结束时间和时间间隔
5、点击“更多”弹出排队的定义设置
6、仿真后，选择评估——结果列表——排队长度查看仿真结果

## 数据采集点
数据采集点用来收集数据，输出结果
数据采集器用来配合信号感应控制使用
1、左侧路网对象点击激活数据采集点
2、在设置位置CTRL+右键点击创建
3、选择评估——测量定义——数据采集设施
4、在底部截面数据采集界面的数据采集点中勾选刚刚创建的编号
5、选择评估——配置打开评估设置窗口，选择结果特征属性选项卡
6、在收集数据一列勾选数据采集点的框，设置时间区间
7、仿真后，选择评估——结果列表——数据采集查看仿真结果

## 节点
1、左侧路网对象点击激活节点
2、路网中右击选择添加节点，弹出节点设置框，勾选节点评价
3、选择评估——配置打开评估设置窗口，选择结果特征属性选项卡
4、在收集数据一列勾选节点的框，设置时间区间
5、点击“更多”弹出排队的定义设置
6、仿真后，选择评估——结果列表——节点查看仿真结果
7、在转向结果中，“1-7@xx-20@xx”表示节点1中的路段7转向路段20的结果

# 插入3D模型
1、左侧路网对象点击激活静态3D模型
2、在路网右击选择添加3D模型
3、选择3D模型
4、CTRL+d切换二维视图下，通过复制粘贴批量添加模型

## 3D信号灯
1、左侧路网对象点击激活3D交通信号
2、在路网右击选择添加3D交通信号，弹出对话框
3、点击添加灯臂按钮，弹出信号灯臂
4、点击添加信号灯按钮，弹出3D信号灯头
5、选择信号灯式样，在所属指示方向上添加信号灯组和信号灯
6、分别添加左转和直行两个信号灯并添加信号灯组配时方案
7、可以在二维视图下对信号灯的臂长、信号灯位置拖拽设置
8、背景图设置好后，可以在路网对象中关闭信号灯头，仿真时就隐藏掉
   也可以在信号灯头按钮的详细设置中显示方式下拉列表选择停车线

# 仿真录像
1、选择演示——情景提要，弹出情景提要列表
2、右击选择新建情景提要
3、在情景提要框的下拉列表中选择关键帧
4、调整好画面角度，在右侧列表右击选择新建帧，设置起始时间和持续时间
5、切换好角度后，继续点击添加新的帧，当设置好起始时间时，过渡时间自动计算出来
6、如果想根据镜头的录像速度预览，在情景提要一栏右键选择“根据AVI速度预览”

## 录制多个仿真视频
1、每个情景提要就是录制一个视频，录制多个视频要新建多个情景提要
2、在新建的情景提要下新建关键帧
3、在关键帧设置时间以及相机位置
4、如果要同时录制多个视频，记得勾选recavi选项
5、可以设置每个视频的文件名，如果不设置会自动默认
6、勾选演示——record AVIs选项
7、然后开始运行仿真
8、运行完后视频压缩建议选择MP4格式或Microsoft video格式


